#!/usr/bin/env bash
# A bash script that will display information about subdomains.
# Function to display DNS information for a subdomain
display_dns_info() {
    local domain="$1"
    local subdomain="$2"
    
    # Use dig to retrieve DNS information and awk to extract relevant data
    local dns_info
    if [[ -z "$subdomain" ]]; then
        dns_info=$(dig "$subdomain.$domain" +short)
    else
        dns_info=$(dig "$domain" +short)
    fi

    # Check if DNS information is available
    if [[ -n "$dns_info" ]]; then
        local record_type=$(echo "$dns_info" | awk '{print $2}')
        local destination=$(echo "$dns_info" | awk '{print $1}')
        echo "The subdomain $subdomain is a $record_type record and points to $destination"
    else
        echo "DNS information not found for $subdomain.$domain"
    fi
}

# Main script
if [[ $# -lt 1 ]]; then
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi

domain="$1"
subdomain="$2"

if [[ -z "$subdomain" ]]; then
    # Display information for default subdomains
    display_dns_info "$domain" www
    display_dns_info "$domain" lb-01
    display_dns_info "$domain" web-01
    display_dns_info "$domain" web-02
else
    # Display information for the specified subdomain
    display_dns_info "$domain" "$subdomain"
fi

